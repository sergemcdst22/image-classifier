
## Описание

Веб-приложение позволяет загрузить изображение jpg или png и классифицировать его с помощью одной из моделей, предложенных фреймворком PyTorch. Поскольку одни изображения обрабатываются лучше одними моделями, а другие - другими, изображение позволяет выбрать любую из предложенных моделей (правда, некоторые из них могут не поддерживать аппаратное обеспечение компьютера, на котором запущен сервер, в этом случае не придет ответ, UI выведет строку "Сервер не ответил на запрос. Скорее всего, он не поддерживает данную модель, выберите другую", а сервер будет перезапущен, если запуск был с опцией restart always)


Для отображения русского текста использован единственный найденный мной вариант бесплатного использования google-переводчика - googletrans. К сожалению, он переводит только одним вариантом, возможно стоит взять его исходный код и изменить, чтобы предлагал несколько вариантов (и можно было выбирать часть речи). Из-за не всегда корректного перевода добавил также выбор языка, чтобы можно было посмотреть оригинальный текст категории, предложенной моделью


При первом выборе модели она загружается на сервер, что может занять какое-то время. Когда я проверял, ни разу не возникало таймаутов, но возможно стоит вынести это в фоновые задачи и затем спрашивать со стороны фронтенда о готовности (или обновлять по вебсокету). Также из возможных улучшений - не сохранять файл после загрузки, а передавать считанные байты сразу в PyTorch (не нашел, как это сделать, и сейчас сохраняю файл, а в конце удачной или неудачной обработки удаляю его в блоке finally)


Кеш моделей устанавливается в {имя пользователя}/.cache/torch и может занимать существенное место на компьютере, на котором тестируется программа, скорее всего после тестирования стоит его удалить (если, конечно, он не используется в других проектах)

## Установка

1. Откройте терминал в Linux/Mac или PowerShell в Windows

   Скопируйте код проекта из репозитория

```bash
  git clone https://github.com/sergemcdst22/image-classifier.git
  cd image-classifier
```

Далее возможны два варианта:

2. Запустите  с помощью uvicorn:

```bash
  python -m venv venv (возможно, понадобится ввести py или python3 - на Windows и Linux соответственно)
  source venv/bin/activate (на Windows вместо этой команды введите venv/Scripts/activate)
  pip3 install -r requirements.txt
  pip3 install torch torchvision (на Linux добавьте в конец этой команды --index-url https://download.pytorch.org/whl/cpu)
  cd app
  uvicorn main:app --reload --port 80
```


2. Либо запустите в Docker
```bash
  docker build -t classifier-img .
  docker run -d --restart always --name classifier -p 80:80 classifier-img
```
